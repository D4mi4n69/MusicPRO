{% extends 'base.html' %}
{% load static %}
{% block head %}
<style>
    .card-img-top-container {
        max-height: 300px; /* Ajusta aquí el valor de altura máxima deseado */
        overflow: hidden;
    }

    .card-content {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        height: 100%;
    }

    .card-button-container {
        margin-top: auto;
    }

    .carousel-item img {
        height: 600px; 
    }

    @media (max-width: 768px) {
        .carousel-item img {
            height: 400px;
        }
    }

    .carousel-caption h5,
    .carousel-caption p {
        font-weight: bold;
  }

</style>
{% endblock %}

{% block content %}

<!-- CARRUSEL -->
<div class="carrusel">
    <div class="container-fluid">
    
      <div id="carousel1" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#carousel1" data-slide-to="0" class="active"></li>
          <li data-target="#carousel1" data-slide-to="1"></li>
          <li data-target="#carousel1" data-slide-to="2"></li>
        </ol>
        <!-- diapositivas -->
        <div class="carousel-inner ">
          
          <div class="carousel-item active">
            <a href="#"><img class="d-block w-100" src="{% static 'img/guitarras.jpg' %}" alt=""> </a>
              <div class="carousel-caption">
                <h1 class="text-white">Bienvenido a MusicPRO</h1>
                <p class="h3">Los mejores artículos musicales se encuentran acá</p>
              </div>
          </div>
          <div class="carousel-item">
              <img class="d-block w-100" src="{% static 'img/reproductor.jpg' %}" alt="">
              <div class="carousel-caption">
                <h1 class="text-white">LOREM IPSUM</h1>
                <p class="h3">LOREM IPSUM AGREGA MAS TEXTO</p>
              </div>
          </div>
          <div class="carousel-item">
              <img class="d-block w-100" src="{% static 'img/mas-instrumentos.jpg' %}" alt="">
              <div class="carousel-caption">
               <h1 class="text-white">LOREM IPSUM</h1>
                <p class="h3">LOREM IPSUM AGREGA MAS TEXTO</p>
              </div>
          </div>
        </div>
        <!-- botones de desplazamiento a izquierda y derecha -->      
        <a class="carousel-control-prev" href="#carousel1" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carousel1" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
  </div>
</div>




<div class="container mt-5">
    <h1>Productos</h1>

    <form method="GET" action="{% url 'index' %}">
        <label for="categoria">Filtrar por categoría:</label>
        <select name="categoria" id="categoria">
            <option value="">Todos</option>
            {% for categoria in categorias %}
                <option value="{{ categoria.nombre }}" {% if categoria_filtrada == categoria.nombre %}selected{% endif %}>{{ categoria.nombre }}</option>
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-primary">Filtrar</button>
    </form>

    <div class="row mb-5">
        {% if productos %}
            {% for p in productos %}
            <div class="col-12 col-md-4" style="margin-top: 20px;">
                <div class="card text-center card-content">
                    {% if p.imagen %}
                        <img src="{{ p.imagen.url }}" alt="{{producto.nombre}}" class="card-img-top-container mx-auto img-fluid">
                    {% else %} 
                        <img src="{% static 'img/rayo.jpg' %}" class="card-img-top mx-auto img-fluid">
                    {% endif %} 
                    <div class="card-body">
                        <h4 class="card-title"> {{ p.nombre }} </h4>
                        <h5>${{p.precio}}</h5>
                        <p class="card-text">
                            {{ p.categoria }}
                        </p>
                    </div>
                    <div class="card-button-container">
                        <a href="{% url 'agregar' p.codigo_producto %}" class="btn btn-danger">Comprar</a>
                        <a href="{% url 'producto_detalles' p.codigo_producto %}" class="btn btn-warning text-white">Ver detalle</a>
                        <br>
                        <br>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <p>No hay productos disponibles</p>
        {% endif %}
    </div>
</div>

{% endblock %}








